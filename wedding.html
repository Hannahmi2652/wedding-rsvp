<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="××•×–×× ×™× ×œ×—×ª×•× ×” ×©×œ× ×•! / Vous Ãªtes invitÃ©s Ã  notre mariage !" />
  <meta property="og:description" content="×‘×•××• ×œ×—×’×•×’ ××™×ª× ×• ××ª ×”×™×•× ×”×××•×©×¨ ×‘×—×™×™× ×• / Rejoignez-nous pour une journÃ©e inoubliable." />
  <meta property="og:image" content="https://hannahmi2652.github.io/wedding-rsvp/cart.jpg" />
  <meta property="og:url" content="https://hannahmi2652.github.io/wedding-rsvp/wedding.html" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <title>Confirmation de prÃ©sence au mariage / ××™×©×•×¨ ×”×’×¢×” ×œ×—×ª×•× ×”</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<video id="myVideo" width="320" height="240" autoplay muted loop playsinline style="border: none; outline: none;">
  <source src="videocard.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
  <h1>×× × ××©×¨×• ××ª ×”×’×¢×ª×›× ×œ×—×ª×•× ×” ×©×œ× ×• </h1>
  <h1>Merci de confirmer votre prÃ©sence Ã  notre mariage</h1>
<br><br>
  <form id="rsvp">
    <label for="name"> Nom Complet / ×©× ××œ× :</label>
    <input type="text" id="name" name="name" required>
    <label for="coming"> Vous serez des nÃ´tres / × ×ª×¨××” ×‘×™×•× ×”×’×“×•×œ ?</label>
    <select id="coming" name="coming">
      <option value="yes">Oui / ×›×Ÿ</option>
      <option value="no"> Non / ×œ×</option>
      <option value="maybe">Peut-Ãªtre / ××•×œ×™</option>
    </select>

    <label for="guests">Combien de personnes / ×›××” ×ª×”×™×•?</label>
    <input type="number" id="guests" name="guests" min="1" max="10">
<label for="phone">NumÃ©ro de tÃ©lÃ©phone / ××¡×¤×¨ ×˜×œ×¤×•×Ÿ :</label>
<input type="tel" id="phone" name="phone" required>

<label for="for">CÃ´tÃ© du mariÃ© ou de la mariÃ©e / ××ª× ××”×¦×“ ×©×œ ×”×—×ª×Ÿ ××• ×”×›×œ×”?</label>
<select id="for" name="for">
  <option value="groom"> mariÃ© / ×—×ª×Ÿ</option>
  <option value="bride"> mariÃ©e / ×›×œ×”</option>
</select>

    <button type="submit">Envoyer / ×©×œ×—</button>
  </form>
<script>
 document.getElementById("rsvp").addEventListener("submit", function(e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);

    fetch("https://script.google.com/macros/s/AKfycbzWjZM6TDRm9nNC_H3iScNxe6-810myvTROU7Y7eeWbEtDRlXEIFfOR27ZmiBRtLN-X/exec", {
      method: "POST",
      body: data
    }).then(response => {
      if (response.ok) {
        window.location.href = "thankyou.html";
      } else {
        alert("××™×¨×¢×” ×©×’×™××” ×‘×©×œ×™×—×”. ×× × × ×¡×• ×©×•×‘.");
      }
    });
  });
  const video = document.getElementById('myVideo');
  video.playbackRate = 2; 
  //here is if the come another time 
   const rsvpForm = document.getElementById("rsvp");
  const video = document.getElementById('myVideo');

  // Speed up the background video
  video.playbackRate = 2;

  // Check if the user already responded
  const existingRSVP = localStorage.getItem("rsvpConfirmed");

  if (existingRSVP) {
    // Hide the form
    rsvpForm.style.display = "none";

    // Show confirmation message and map link
    const confirmation = document.createElement("div");
    confirmation.innerHTML = `
      <h2>×ª×•×“×” ×©××™×©×¨×ª× ××ª ×”×’×¢×ª×›×! ğŸ’–</h2>
      <h2>Merci d'avoir confirmÃ© votre prÃ©sence !</h2>
      <p>ğŸ—ºï¸ ×›×ª×•×‘×ª ×”××•×œ×: <a href="https://waze.com/ul?ll=31.7683,35.2137" target="_blank">× ×•×•×˜ ×¢× Waze</a> | 
      <a href="https://www.google.com/maps?q=31.7683,35.2137" target="_blank">Google Maps</a></p>
      <button id="edit">Modifier la rÃ©ponse / ×¢×¨×•×š ×ª×©×•×‘×”</button>
    `;
    document.body.appendChild(confirmation);

    document.getElementById("edit").addEventListener("click", () => {
      localStorage.removeItem("rsvpConfirmed");
      location.reload(); // Reload the page to show the form again
    });
  }

  // Form submission handler
  rsvpForm.addEventListener("submit", function(e) {
    e.preventDefault();
    const data = new FormData(rsvpForm);

    fetch("https://script.google.com/macros/s/AKfycbzWjZM6TDRm9nNC_H3iScNxe6-810myvTROU7Y7eeWbEtDRlXEIFfOR27ZmiBRtLN-X/exec", {
      method: "POST",
      body: data
    }).then(response => {
      if (response.ok) {
        localStorage.setItem("rsvpConfirmed", "true");
        window.location.href = "thankyou.html";
      } else {
        alert("××™×¨×¢×” ×©×’×™××” ×‘×©×œ×™×—×”. ×× × × ×¡×• ×©×•×‘.");
      }
    });
  });
</script>

</body>
</html>
